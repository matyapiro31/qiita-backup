
<h1>
<span id="レジストリは管理が面倒" class="fragment"></span><a href="#%E3%83%AC%E3%82%B8%E3%82%B9%E3%83%88%E3%83%AA%E3%81%AF%E7%AE%A1%E7%90%86%E3%81%8C%E9%9D%A2%E5%80%92"><i class="fa fa-link"></i></a>レジストリは管理が面倒</h1>

<p>WindowsだけでなくLinuxもよくシステムを破壊する私ですが､レジストリはかなり厄介なものです｡<br>
標準のWindowsの機能では<code>regedit.exe</code>やその他のコマンドラインツールでは*.reg形式のファイルしかバックアップできません｡<br>
これは非常に面倒ですよね?レジストリの階層構造をそのままディレクトリとしてGitやBazaarで管理できたら...と思っている人もいるかもしれません｡実際レジストリをそういうふうに扱えるソフトもあるかもしれませんが､gitのプラグインとかいちいち設定するのも面倒ですよね？<br>
そこでCygwinです｡</p>

<h1>
<span id="cygwinのレジストリ管理ツール" class="fragment"></span><a href="#cygwin%E3%81%AE%E3%83%AC%E3%82%B8%E3%82%B9%E3%83%88%E3%83%AA%E7%AE%A1%E7%90%86%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>Cygwinのレジストリ管理ツール</h1>

<p>Cygwinには<code>regtool</code>などの強力なレジストリ管理ツールがあります｡ちなみに標準であるコマンドラインツールと同じようなことができますが､<br>
こちらは色々利点があります｡<br>
1. グループポリシーで制限されない - セキュリティのためにレジストリエディタが制限されていても使えます｡<br>
2. 管理者権限が要らない - あれを起動するたびにUACが出るのも､UACの要らない辺りしか書き換えないのに...というのとは無縁です。<br>
3. ファイルのように扱える - /proc/registryがファイルシステムのようにレジストリを扱える機能を提供します。まああまりうまくは行きませんが。</p>

<h1>
<span id="cygwinで擬似ファイルシステムを使おう" class="fragment"></span><a href="#cygwin%E3%81%A7%E6%93%AC%E4%BC%BC%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%82%92%E4%BD%BF%E3%81%8A%E3%81%86"><i class="fa fa-link"></i></a>Cygwinで擬似ファイルシステムを使おう</h1>

<p>Cygwinだと/proc/registryがレジストリをまるでディレクトリとファイルのように扱ってくれます。cpとかのコマンドがうまく動かなかったりはしますが、<br>
これが結構便利です。findなどファイルとディレクトリの違いが関係ないものはちゃんと動作してくれるんですけども...cpやgrepが(このままでは)使えない。<br>
キーはディレクトリかつファイルという特殊なファイルの扱いなので、仕方が無いですが...<br>
というわけでちゃんと動作させる方法を考えてみました。<br>
<a href="https://gist.github.com/matyapiro31/83676f29785e9f718bd3" rel="nofollow noopener" target="_blank">Gist regcp.sh</a><br>
色々とあるのですが、cpやgrepが動かないので、とりあえず自分でcpの代わりのコマンドを作ってみました。<br>
使い方:destにカレントディレクトリ以下の内容をコピーします。/proc/registry以下専用です。<br>
<code>/path/regcp.sh dest</code><br>
ちなみにエクスポートだけでインポートは出来ません。これで出力したディレクトリに対してはきちんとgrepやfindが効くのであの耐えられないほど遅いregedit.exeの検索よりはましですね。誰か改良をおねがいします。</p>
